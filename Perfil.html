<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>STRAPPED - Perfil</title>
  <link rel="stylesheet" href="style.css">
  <style>
    html { scroll-behavior: smooth; }

    /* Peque√±os estilos a√±adidos para que las secciones funcionen bien */
    .perfil-wrapper { max-width: 1200px; margin: 80px auto; padding: 0 20px; display: grid; grid-template-columns: 260px 1fr; gap: 28px; }
    .perfil-menu { background:#fafafa; padding:20px; border-radius:10px; border:1px solid #eee; }
    .perfil-menu h3{ margin:0 0 12px 0; color:#666; font-size:13px; }
    .perfil-menu .perfil-menu{ display:flex; flex-direction:column; gap:8px; margin-top:8px; }
    .perfil-btn{ background:#f4f4f4; border:0; padding:10px 12px; border-radius:8px; text-align:left; cursor:pointer; font-size:15px; }
    .perfil-btn.active{ background:#000; color:#fff; font-weight:700; }
    .perfil-contenido{ background:#fff; padding:28px; border-radius:10px; border:1px solid #eee; min-height:420px; }
    .perfil-header{ display:flex; justify-content:space-between; align-items:center; margin-bottom:18px; }
    .perfil-form{ display:grid; grid-template-columns:1fr 1fr; gap:18px 22px; }
    .perfil-form .largo{ grid-column:1/3; }
    .input-group{ display:flex; flex-direction:column; gap:6px; }
    .input-group input{ padding:10px; border-radius:8px; border:1px solid #d6d6d6; }
    .save-btn{ background:#000; color:#fff; border:0; padding:10px 14px; border-radius:8px; cursor:pointer; grid-column:1/3; justify-self:start; }
    .hidden{ display:none !important; }

    /* Direcciones */
    .direcciones-lista{ display:flex; flex-direction:column; gap:12px; margin-top:12px; }
    .direccion-item{ background:#fafafa; padding:12px; border-radius:8px; border:1px solid #ececec; display:flex; justify-content:space-between; align-items:center; }
    .direccion-item .meta{ display:flex; flex-direction:column; gap:4px; }
    .direccion-item button{ background:transparent; border:1px solid #ff5a5a; color:#ff5a5a; padding:6px 8px; border-radius:6px; cursor:pointer; }
    .direccion-form{ margin-top:12px; display:flex; flex-direction:column; gap:10px; }
    .direccion-form input{ padding:10px; border-radius:8px; border:1px solid #d6d6d6; }

    @media (max-width:900px){
      .perfil-wrapper{ grid-template-columns: 1fr; margin: 20px auto; }
      .perfil-form{ grid-template-columns: 1fr; }
      .save-btn{ grid-column: auto; width:100%; }
    }
  </style>
</head>
<body>

  <!-- ========== HEADER (tu header actual, no modifiqu√©) ========== -->
  <header class="header">
    <div class="menu container">

      <ul>
        <li><a href="#" class="icono"><img src="Icono.png" alt="icono"></a></li>
      </ul>

      <div id="botones-panel" class="botones-panel">
      </div>

      <a href="index.html" class="logo">STRAPPED</a>

      <ul class="botones">
            <li>
              <a href="#catalogo">CAT√ÅLOGO</a>
              <div class="botones-sub">
                <div class="contenedor">
                  <div class="col">
                    <h4>TECNOLOG√çA</h4>
                    <a href="Tecnologia.html">Audifonos Strapped</a>
                    <a href="relojes.html">Cargador Iphone</a>
                    <a href="bolsos.html">Apple watch</a>
                  </div>

                  <div class="col">
                    <h4>RELOJES</h4>
                    <a href="Tecnologia.html">Reloj1</a>
                    <a href="Tecnologia.html">Reloj2</a>
                    <a href="Tecnologia.html">Reloj3</a>
                  </div>

                  <div class="col">
                    <h4>BOLSOS Y CARRIELES</h4>
                    <a href="#whatsapp">Bolsos Strapped</a>
                    <a href="#instagram">Morrales Strapped</a>
                    <a href="#correo">Billeteras Strapped</a>
                  </div>
                </div>
              </div>
            </li>
            <li>
              <a href="#soporte">HOMBRES</a>
              <div class="botones-sub">
                <div class="contenedor">
                  <div class="col">
                    <h4>BUZOS</h4>
                    <a href="Tecnologia.html">Underwater</a>
                    <a href="relojes.html">Boxy Fit</a>
                    <a href="bolsos.html">Oversize</a>
                  </div>

                  <div class="col">
                    <h4>ACCESORIOS</h4>
                    <a href="Tecnologia.html">Relojes</a>
                    <a href="Tecnologia.html">Bolsos</a>
                    <a href="Tecnologia.html">Maletas</a>
                  </div>

                  <div class="col">
                    <h4>BOLSOS Y CARRIELES</h4>
                    <a href="#whatsapp">Bolsos Strapped</a>
                    <a href="#instagram">Morrales Strapped</a>
                    <a href="#correo">Billeteras Strapped</a>
                  </div>
                </div>
              </div>            
            </li>
              
            <li>
              <a href="#info">MUJERES</a>
              <div class="botones-sub">
                <div class="contenedor">
                  <div class="col">
                    <h4>JAJAJA</h4>
                    <a href="Tecnologia.html">3237830141</a>
                    <a href="relojes.html">Cargador Iphone</a>
                    <a href="bolsos.html">Apple watch</a>
                  </div>

                  <div class="col">
                    <h4>RELOJES</h4>
                    <a href="Tecnologia.html">Reloj1</a>
                    <a href="Tecnologia.html">Reloj2</a>
                    <a href="Tecnologia.html">Reloj3</a>
                  </div>

                  <div class="col">
                    <h4>BOLSOS Y CARRIELES</h4>
                    <a href="#whatsapp">Bolsos Strapped</a>
                    <a href="#instagram">Morrales Strapped</a>
                    <a href="#correo">Billeteras Strapped</a>
                  </div>
                </div>
              </div>
            </li>

            <li>
              <a href="#contacto">SALE</a>
              <div class="botones-sub">
                <div class="contenedor">
                  <div class="col">
                    <h4>JAJAJA</h4>
                    <a href="Tecnologia.html">3237830141</a>
                    <a href="relojes.html">Cargador Iphone</a>
                    <a href="bolsos.html">Apple watch</a>
                  </div>

                  <div class="col">
                    <h4>RELOJES</h4>
                    <a href="Tecnologia.html">Reloj1</a>
                    <a href="Tecnologia.html">Reloj2</a>
                    <a href="Tecnologia.html">Reloj3</a>
                  </div>

                  <div class="col">
                    <h4>BOLSOS Y CARRIELES</h4>
                    <a href="#whatsapp">Bolsos Strapped</a>
                    <a href="#instagram">Morrales Strapped</a>
                    <a href="#correo">Billeteras Strapped</a>
                  </div>
                </div>
              </div>
            </li>

            <li class="login-mobile"><a href="#" id="loginBtn">Iniciar Sesi√≥n / Registrarse</a></li>
      </ul>


      <ul class="iconos">
        <li><a href="#"><img src="Lupa.png" alt="Buscar"></a></li>
        <li id="panel-usuario" class="panel-usuario">
          <a href="#" id="openLogin"><img src="User.png" alt="Usuario"></a>
        </li>
        <li><a href="#" class="bolsa"><img src="Bolsa.png" alt="Carrito"><span id="contador-carrito">0</span></a></li>
      </ul>

      <div class="menu-overlay"></div>


        <div id="carrito-panel" class="carrito-panel">
          <div class="carrito-header">
            <h2>TU CARRITO</h2>
            <button id="cerrar-carrito" class="cerrar-carrito">√ó</button>
          </div>
          <div class="carrito-body">
            <p>EL CARRITO EST√Å VAC√çO</p>
          </div>
        </div>

        <!-- Fondo oscuro al abrir -->
        <div id="overlay-carrito" class="overlay-carrito"></div>


      <!-- MODAL LOGIN -->
      <div id="authModal" class="modal">
        <div class="modal-content">
          <span class="close-btn" id="closeModal">&times;</span>

          <div class="form-container">
            <div class="form-toggle">
              <button id="loginToggle" class="active">Iniciar Sesi√≥n</button>
              <button id="registerToggle">Registrarse</button>
            </div>

            <form id="loginForm" class="form active">
              <h2>Iniciar Sesi√≥n</h2>
              <input type="email" name="email" placeholder="Correo electr√≥nico" required>
              <input type="password" name="password" placeholder="Contrase√±a" required>
              <button type="submit" class="btn">Entrar</button>
            </form>

            <form id="registerForm" class="form">
              <h2>Crear Cuenta</h2>
              <input type="text" name="nombre" placeholder="Nombre completo" required>
              <input type="email" name="email" placeholder="Correo electr√≥nico" required>
              <input type="password" name="password" placeholder="Contrase√±a" required>
              <button type="submit" class="btn">Registrarse</button>
            </form>

            <button id="googleLogin" class="btn btn-google">
              <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" 
                  style="width:20px;margin-right:8px;">
              Continuar con Google
            </button>
          </div>
        </div>
      </div>

      <!-- üîé MODAL DE B√öSQUEDA -->
      <div id="busqueda-modal" class="busqueda-modal">
        <div class="busqueda-contenido">

          <div class="container-input">
            <input placeholder="BUSCAR..." type="text" name="text" class="input" id="inputBusqueda">
            <!-- √çcono opcional -->
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.8" stroke="black" class="icono-buscar">
              <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-4.35-4.35m0 0A7.5 7.5 0 1010.5 18.5a7.5 7.5 0 006.15-1.85z" />
            </svg>
          </div>

          <button id="cerrarBusqueda" class="cerrar-busqueda">√ó</button>
          <div id="resultadosBusqueda" class="resultados-busqueda"></div>
        </div>
      </div>

    </div>
  </header>

  <!-- ========== PERFIL WRAPPER (menu lateral + contenido) ========== -->
  <div class="perfil-wrapper">

    <!-- Menu lateral -->
    <aside class="perfil-menu">
      <h3>HOLA:</h3>
      <div class="perfil-menu">
        <button class="perfil-btn active" data-section="perfil">Perfil</button>
        <button class="perfil-btn" data-section="direcciones">Direcciones</button>
        <button class="perfil-btn" data-section="pedidos">Pedidos</button>
        <button class="perfil-btn" data-section="favoritos">Favoritos</button>
        <button class="perfil-btn" data-section="logout">Salir</button>
      </div>
    </aside>

    <!-- Contenido (aqu√≠ est√°n TODAS las secciones) -->
    <section class="perfil-contenido">

      <!-- SECCI√ìN PERFIL -->
      <div class="perfil-section" id="perfil">
        <div class="perfil-header">
          <h2>PERFIL</h2>
          <a class="perfil-editar" href="#">‚úé Editar</a>
        </div>

        <form class="perfil-form" onsubmit="return false;">
          <div class="input-group">
            <label>Nombre</label>
            <input type="text" id="perfilNombre" />
          </div>

          <div class="input-group">
            <label>Apellido</label>
            <input type="text" id="perfilApellido" />
          </div>

          <div class="input-group largo">
            <label>Email</label>
            <input type="email" id="perfilEmail" readonly />
          </div>

          <div class="input-group">
            <label>C√©dula de ciudadan√≠a</label>
            <input type="text" id="perfilCedula" />
          </div>

          <div class="input-group">
            <label>G√©nero</label>
            <input type="text" id="perfilGenero"/>
          </div>

          <div class="input-group">
            <label>Fecha de nacimiento</label>
            <input type="date" id="perfilNacimiento"/>
          </div>

          <div class="input-group">
            <label>Tel√©fono</label>
            <input type="text" id="perfilTelefono" />
          </div>

          <button id="btnGuardarPerfil" class="save-btn">Guardar cambios</button>
        </form>
      </div>

      <!-- SECCI√ìN DIRECCIONES -->
      <div class="perfil-section hidden" id="direcciones">
        <h2>Mis Direcciones</h2>

        <div id="listaDirecciones" class="direcciones-lista">
          <!-- Direcciones cargadas din√°micamente -->
        </div>

        <button id="btnNuevaDireccion" class="save-btn" style="margin-top:14px;">
          + Agregar nueva direcci√≥n
        </button>

        <div id="formDireccion" class="hidden direccion-form">
          <h3>Nueva direcci√≥n</h3>

          <input type="text" id="dirNombre" placeholder="Nombre completo" />
          <input type="text" id="dirTelefono" placeholder="Tel√©fono" />
          <input type="text" id="dirCiudad" placeholder="Ciudad" />
          <input type="text" id="dirDireccion" placeholder="Direcci√≥n completa" />

          <button id="btnGuardarDireccion" class="save-btn">
            Guardar direcci√≥n
          </button>
        </div>
      </div>

      <!-- SECCI√ìN PEDIDOS -->
      <section class="perfil-section hidden" id="pedidos">
        <h2>Mis Pedidos</h2>
        <div id="listaPedidos">Aqu√≠ se mostrar√°n tus pedidos.</div>
      </section>

      <!-- SECCI√ìN FAVORITOS -->
      <div class="perfil-section hidden" id="favoritos">
        <h2>Favoritos</h2>
        <div id="listaFavoritos" class="favoritos-grid">A√∫n no tienes favoritos.</div>
      </div>

    </section>

  </div> <!-- /.perfil-wrapper -->

  <!-- ========== FOOTER (tu footer actual) ========== -->
  <footer id="contacto">
    <div class="footer-container">
      <div class="footer-col">
        <h4>STRAPPED</h4>
        <p>Tu marca de confianza en tecnolog√≠a, accesorios y estilo urbano. Inspirada en el dise√±o moderno y la autenticidad.</p>
      </div>

      <div class="footer-col">
        <h4>INFORMACI√ìN</h4>
        <ul>
          <li><a href="about.html">Sobre Nosotros</a></li>
          <li><a href="politica.html">Pol√≠tica de Privacidad</a></li>
          <li><a href="envios.html">Env√≠os y Devoluciones</a></li>
          <li><a href="soporte.html">Soporte</a></li>
        </ul>
      </div>

      <div class="footer-col">
        <h4>S√çGUENOS</h4>
        <ul class="iconos-footer">
          <li><a href="https://www.instagram.com/strappedco.urban/"><img src="Instagram.png" alt="Instagram"></a></li>
          <li><a href="https://www.tiktok.com/@_strappedco_"><img src="Tiktok.png" alt="TikTok"></a></li>
        </ul>
      </div>
    </div>
    <p class="copyright">&copy; 2025 STRAPPED. Todos los derechos reservados.</p>
  </footer>

  <!-- SDK de Wompi (lo dejo pero protegemos su uso abajo) -->
  <script src="https://checkout.wompi.co/widget.js"></script>

  <!-- Tus scripts -->
  <script src="carrito.js"></script>

  <!-- =========================
       C√≥digo modular para perfil + direcciones (usa tus auth.js / Firebase.js)
       ========================= -->
  <script type="module">
    import { auth, db } from "./Firebase.js";
    import { obtenerPerfil, actualizarPerfil } from "./auth.js";
    import { onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-auth.js";
    import {
      collection,
      addDoc,
      getDocs,
      deleteDoc,
      doc
    } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js";

    // CARGAR DATOS AL ENTRAR (perfil)
    onAuthStateChanged(auth, async (user) => {
      if (!user) {
        // usuario no logueado -> redirigir a inicio (o mostrar mensaje)
        window.location.href = "index.html";
        return;
      }

      // Aseguramos que exista el documento (tu auth.js ya crea uno en crearPerfilUsuario en onAuthStateChanged global)
      const perfil = await obtenerPerfil(user.uid);
      if (perfil) {
        document.getElementById("perfilNombre").value = perfil.nombre || "";
        document.getElementById("perfilApellido").value = perfil.apellido || "";
        document.getElementById("perfilEmail").value = perfil.email || user.email || "";
        document.getElementById("perfilCedula").value = perfil.cedula || "";
        document.getElementById("perfilGenero").value = perfil.genero || "";
        document.getElementById("perfilNacimiento").value = perfil.nacimiento || "";
        document.getElementById("perfilTelefono").value = perfil.telefono || "";
      }

      // Cargar direcciones al entrar
      cargarDirecciones(user.uid);
      // (m√°s cargas futuras: pedidos, favoritos)
      cargarPedidos(user.uid);

    });

    // GUARDAR CAMBIOS DEL PERFIL
    document.getElementById("btnGuardarPerfil").addEventListener("click", async (e) => {
      e.preventDefault();
      const user = auth.currentUser;
      if (!user) return alert("No se detect√≥ sesi√≥n activa.");

      await actualizarPerfil(user.uid, {
        nombre: document.getElementById("perfilNombre").value,
        apellido: document.getElementById("perfilApellido").value,
        cedula: document.getElementById("perfilCedula").value,
        genero: document.getElementById("perfilGenero").value,
        nacimiento: document.getElementById("perfilNacimiento").value,
        telefono: document.getElementById("perfilTelefono").value,
        actualizadoEn: Date.now()
      });

      alert("Perfil actualizado correctamente.");
    });

    // ============================
    // PESTA√ëAS (tabs) - Menu lateral
    // ============================
    document.querySelectorAll(".perfil-btn").forEach(btn => {
      btn.addEventListener("click", () => {
        document.querySelectorAll(".perfil-btn").forEach(b => b.classList.remove("active"));
        btn.classList.add("active");

        document.querySelectorAll(".perfil-section").forEach(sec => sec.classList.add("hidden"));

        const section = btn.dataset.section;
        const el = document.getElementById(section);
        if (el) el.classList.remove("hidden");

        if (section === "logout") {
          // cerrar sesi√≥n y redirigir
          import("./Firebase.js").then(m => {
            // usamos signOut desde auth.js o aqu√≠
            import("./auth.js").then(a => { a.signOut ? a.signOut() : null; });
            window.location.href = "index.html";
          });
        }
      });
    });

    // ============================
    // DIRECCIONES: CRUD simple
    // ============================
    const listaDireccionesEl = document.getElementById("listaDirecciones");
    const btnNueva = document.getElementById("btnNuevaDireccion");
    const formDir = document.getElementById("formDireccion");
    const btnGuardarDir = document.getElementById("btnGuardarDireccion");

    btnNueva && btnNueva.addEventListener("click", () => {
      formDir.classList.toggle("hidden");
    });

    async function cargarDirecciones(uid) {
      if (!uid) return;
      listaDireccionesEl.innerHTML = "<p>Cargando direcciones...</p>";
      const ref = collection(db, "usuarios", uid, "direcciones");
      const snap = await getDocs(ref);
      listaDireccionesEl.innerHTML = "";

      if (snap.empty) {
        listaDireccionesEl.innerHTML = "<p>No tienes direcciones guardadas.</p>";
        return;
      }

      snap.forEach(docu => {
        const d = docu.data();
        const wrapper = document.createElement("div");
        wrapper.className = "direccion-item";
        wrapper.innerHTML = `
          <div class="meta">
            <strong>${d.nombre || ""}</strong>
            <span>${d.telefono || ""}</span>
            <span>${d.ciudad || ""}</span>
            <span>${d.direccion || ""}</span>
          </div>
          <div class="acciones">
            <button class="btn-eliminar" data-id="${docu.id}">Eliminar</button>
          </div>
        `;
        listaDireccionesEl.appendChild(wrapper);
      });

      // asignar evento eliminar
      listaDireccionesEl.querySelectorAll(".btn-eliminar").forEach(btn => {
        btn.addEventListener("click", async () => {
          const id = btn.dataset.id;
          const user = auth.currentUser;
          if (!user) return alert("No hay sesi√≥n activa.");
          await deleteDoc(doc(db, "usuarios", user.uid, "direcciones", id));
          cargarDirecciones(user.uid);
        });
      });
    }

    // Guardar nueva direcci√≥n
    btnGuardarDir && btnGuardarDir.addEventListener("click", async () => {
      const user = auth.currentUser;
      if (!user) return alert("No hay sesi√≥n activa.");
      const payload = {
        nombre: document.getElementById("dirNombre").value || "",
        telefono: document.getElementById("dirTelefono").value || "",
        ciudad: document.getElementById("dirCiudad").value || "",
        direccion: document.getElementById("dirDireccion").value || "",
        creadoEn: Date.now()
      };
      await addDoc(collection(db, "usuarios", user.uid, "direcciones"), payload);
      // limpiar y recargar
      document.getElementById("dirNombre").value = "";
      document.getElementById("dirTelefono").value = "";
      document.getElementById("dirCiudad").value = "";
      document.getElementById("dirDireccion").value = "";
      formDir.classList.add("hidden");
      cargarDirecciones(user.uid);
    });

    async function cargarPedidos(uid) {
    const ref = collection(db, "usuarios", uid, "pedidos");
    const snap = await getDocs(ref);

    const cont = document.getElementById("listaPedidos");
    cont.innerHTML = "";

    if (snap.empty) {
        cont.innerHTML = "<p>No tienes pedidos registrados.</p>";
        return;
    }

    snap.forEach(docu => {
        const p = docu.data();
        const div = document.createElement("div");
        div.classList.add("pedido-item");

        div.innerHTML = `
            <div style="padding:10px;border:1px solid #eee;margin-bottom:10px;border-radius:8px;">
                <p><strong>Total:</strong> $${(p.total || 0).toLocaleString()}</p>
                <p><strong>Fecha:</strong> ${p.creadoEn?.toDate().toLocaleString("es-CO") || "‚Äî"}</p>
                <p><strong>Productos:</strong></p>
                <ul style="margin:5px 0 0 18px;">
                    ${p.productos.map(prod => `
                        <li>${prod.nombre} (x${prod.cantidad})</li>
                    `).join("")}
                </ul>
            </div>
        `;
        cont.appendChild(div);
    });
}

  </script>

  <!-- Protegemos el uso del widget de Wompi: solo ejecuta si existe el bot√≥n en la p√°gina -->
  <script>
    const botonPagar = document.getElementById("btn-finalizar-compra");
    if (botonPagar) {
      botonPagar.addEventListener("click", () => {
        const checkout = new WidgetCheckout({
          currency: "COP",
          amountInCents: 120000,
          reference: "pedido_" + Date.now(),
          publicKey: "pub_test_XXXXXXXXXXXXXXX",
          redirectUrl: "https://strapped-six.vercel.app/gracias.html"
        });
        checkout.open(function (result) {
          console.log("Resultado del pago:", result);
        });
      });
    }
  </script>

<script>
document.addEventListener("DOMContentLoaded", () => {
    const goPedidos = document.getElementById("goPedidos");

    if (!goPedidos) return;

    goPedidos.addEventListener("click", (e) => {
        e.preventDefault();

        const enPerfil = window.location.pathname.includes("Perfil.html");

        if (enPerfil) {
            // Notificar al JS del perfil para cambiar pesta√±a sin recargar
            document.dispatchEvent(new CustomEvent("abrirPedidos"));
        } else {
            // Ir al perfil con hash
            window.location.href = "Perfil.html#pedidos";
        }
    });
});
</script>

<script>
document.addEventListener("DOMContentLoaded", () => {

    const secciones = document.querySelectorAll(".perfil-section");
    const btns = document.querySelectorAll(".perfil-nav button"); 
    // Ajusta .perfil-nav seg√∫n tu estructura de botones

    function abrirSeccion(id) {
        // Ocultar todas
        secciones.forEach(sec => sec.classList.add("hidden"));
        btns.forEach(b => b.classList.remove("activo"));

        // Mostrar seleccionada
        const sec = document.getElementById(id);
        if (sec) sec.classList.remove("hidden");

        // Activar bot√≥n visualmente
        const btn = document.querySelector(`[data-section="${id}"]`);
        if (btn) btn.classList.add("activo");
    }

    // üìå 1. Si entr√≥ con #pedidos
    if (window.location.hash === "#pedidos") {
        abrirSeccion("pedidos");
    }

    // üìå 2. Tabs dentro del perfil (sin recargar)
    btns.forEach(btn => {
        btn.addEventListener("click", () => {
            const target = btn.getAttribute("data-section");
            abrirSeccion(target);
        });
    });

    // üìå 3. Evento desde el men√∫ sin recarga
    document.addEventListener("abrirPedidos", () => {
        abrirSeccion("pedidos");
        // Opcional: scroll autom√°tico
        document.getElementById("pedidos").scrollIntoView({behavior:"smooth"});
    });

});
</script>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const hash = window.location.hash.replace("#", "");

  if (hash === "pedidos") {
    const secciones = document.querySelectorAll(".perfil-section");
    secciones.forEach(sec => sec.classList.add("hidden"));

    const pedidosSec = document.getElementById("pedidos");
    if (pedidosSec) pedidosSec.classList.remove("hidden");
  }
});
</script>

<script>
document.addEventListener("DOMContentLoaded", () => {
  
  const botones = document.querySelectorAll(".perfil-btn");
  const secciones = document.querySelectorAll(".perfil-section");

  // Marcar bot√≥n seg√∫n secci√≥n mostrada
  function activarBoton(id) {
    botones.forEach(b => {
      b.classList.toggle("active", b.dataset.section === id);
    });
  }

  // Al hacer clic en botones del men√∫ lateral
  botones.forEach(boton => {
    boton.addEventListener("click", () => {
      const target = boton.dataset.section;

      // Ocultar todas
      secciones.forEach(sec => sec.classList.add("hidden"));

      // Mostrar la seleccionada
      document.getElementById(target).classList.remove("hidden");

      // Activar visualmente
      activarBoton(target);
    });
  });

  // Si lleg√≥ con #pedidos desde otra p√°gina
  const hash = window.location.hash.replace("#", "");
  if (hash) {
    const sec = document.getElementById(hash);
    if (sec) {
      secciones.forEach(sec => sec.classList.add("hidden"));
      sec.classList.remove("hidden");
      activarBoton(hash);
    }
  } else {
    // Por defecto marcar "perfil"
    activarBoton("perfil");
  }

});
</script>


  

  <!-- Mantengo carrito.js ya cargado m√°s arriba -->
</body>
</html>

